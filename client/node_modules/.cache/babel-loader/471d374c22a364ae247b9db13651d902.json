{"ast":null,"code":"import _slicedToArray from \"/Users/binbinfan/Desktop/mernproject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/binbinfan/Desktop/mernproject/client/src/context/contact/ContactState.js\";\nimport React, { useReducer } from 'react';\nimport axios from 'axios';\nimport ContactContext from './contactContext';\nimport contactReducer from './contactReducer';\nimport { GET_CONTACTS, ADD_CONTACT, DELETE_CONTACT, CONTACT_ERROR, CLEAR_CURRENT, UPDATE_CONTACT, SET_CURRENT } from '../types';\n\nconst ContactState = props => {\n  const initialState = {\n    contacts: [],\n    current: null,\n    error: null\n  };\n\n  const _useReducer = useReducer(contactReducer, initialState),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1];\n\n  const getContacts = async () => {\n    try {\n      const res = await axios.get('/api/profiles');\n      dispatch({\n        type: GET_CONTACTS,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: CONTACT_ERROR,\n        payload: err.response.msg\n      });\n    }\n  }; //Add Contact\n\n\n  const addContact = async contact => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n\n    try {\n      const res = await axios.post('/api/profiles', contact, config);\n      dispatch({\n        type: ADD_CONTACT,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: CONTACT_ERROR,\n        payload: err.response.msg\n      });\n    }\n  }; //Delete contact\n\n\n  const deleteContact = async id => {\n    try {\n      await axios.delete(`/api/profiles/${id}`);\n      dispatch({\n        type: DELETE_CONTACT,\n        payload: id\n      });\n    } catch (err) {\n      dispatch({\n        type: CONTACT_ERROR,\n        payload: err.response.msg\n      });\n    }\n  }; //Set Current Contact\n\n\n  const setCurrent = contact => {\n    dispatch({\n      type: SET_CURRENT,\n      payload: contact\n    });\n  }; //Clear Current Contact\n\n\n  const clearCurrent = () => {\n    dispatch({\n      type: CLEAR_CURRENT\n    });\n  }; //Update Contact\n\n\n  const updateContact = async contact => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n\n    try {\n      const res = await axios.put(`/api/profiles/${contact._id}`, contact, config);\n      dispatch({\n        type: UPDATE_CONTACT,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: CONTACT_ERROR,\n        payload: err.response.msg\n      });\n    }\n  }; //Filter Contacts\n  //Clear Filter\n\n\n  return React.createElement(ContactContext.Provider, {\n    value: {\n      contacts: state.contacts,\n      current: state.current,\n      addContact,\n      clearCurrent,\n      setCurrent,\n      updateContact,\n      deleteContact,\n      getContacts,\n      error: state.error\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default ContactState;","map":{"version":3,"sources":["/Users/binbinfan/Desktop/mernproject/client/src/context/contact/ContactState.js"],"names":["React","useReducer","axios","ContactContext","contactReducer","GET_CONTACTS","ADD_CONTACT","DELETE_CONTACT","CONTACT_ERROR","CLEAR_CURRENT","UPDATE_CONTACT","SET_CURRENT","ContactState","props","initialState","contacts","current","error","state","dispatch","getContacts","res","get","type","payload","data","err","response","msg","addContact","contact","config","headers","post","deleteContact","id","delete","setCurrent","clearCurrent","updateContact","put","_id","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from 'react';\nimport axios from 'axios';\nimport ContactContext from './contactContext';\nimport contactReducer from './contactReducer';\nimport {\n  GET_CONTACTS,\n  ADD_CONTACT,\n  DELETE_CONTACT,\n  CONTACT_ERROR,\n  CLEAR_CURRENT,\n  UPDATE_CONTACT,\n  SET_CURRENT\n \n} from '../types';\n\nconst ContactState = props => {\n  const initialState = {\n    contacts: [],\n    current:null,\n    error:null\n    \n  };\n   const [state, dispatch] = useReducer(contactReducer, initialState);\n\n   const getContacts = async () => {\n    try {\n      const res = await axios.get('/api/profiles');\n\n      dispatch({\n        type: GET_CONTACTS,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: CONTACT_ERROR,\n        payload: err.response.msg\n      });\n    }\n  };\n\n   //Add Contact\n   const addContact =async contact =>{\n     const config ={\n       headers:{\n         'Content-Type': 'application/json'\n       }\n     }\n     try {\n       const res =await axios.post('/api/profiles',contact,config);\n       dispatch({type: ADD_CONTACT, payload:res.data});\n     } catch(err){\n       dispatch({type:CONTACT_ERROR, payload: err.response.msg})\n     }\n   };\n\n   \n   //Delete contact\n   const deleteContact = async id => {\n    try {\n      await axios.delete(`/api/profiles/${id}`);\n\n      dispatch({\n        type: DELETE_CONTACT,\n        payload: id\n      });\n    } catch (err) {\n      dispatch({\n        type: CONTACT_ERROR,\n        payload: err.response.msg\n      });\n    }\n  };\n   //Set Current Contact\n   const setCurrent = contact => {\n    dispatch({ type: SET_CURRENT, payload: contact });\n  };\n   //Clear Current Contact\n   const clearCurrent = () => {\n    dispatch({ type: CLEAR_CURRENT });\n  };\n\n   //Update Contact\n   const updateContact = async contact => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n\n    try {\n      const res = await axios.put(\n        `/api/profiles/${contact._id}`,\n        contact,\n        config\n      );\n\n      dispatch({\n        type: UPDATE_CONTACT,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: CONTACT_ERROR,\n        payload: err.response.msg\n      });\n    }\n  };\n\n   //Filter Contacts\n   //Clear Filter\n\n  return (\n    <ContactContext.Provider\n    value={\n      {\n        contacts: state.contacts,\n        current: state.current,\n        addContact,\n        clearCurrent,\n        setCurrent,\n        updateContact,\n        deleteContact,\n        getContacts,\n        error:state.error\n\n      }}>\n      {props.children}\n    </ContactContext.Provider>\n  )\n};\n\nexport default ContactState;"]},"metadata":{},"sourceType":"module"}