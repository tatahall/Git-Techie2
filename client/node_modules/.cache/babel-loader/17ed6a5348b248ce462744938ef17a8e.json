{"ast":null,"code":"import _slicedToArray from \"/Users/binbinfan/project-3/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/binbinfan/project-3/client/src/context/users/UserState.js\";\nimport React, { useReducer } from 'react';\nimport axios from 'axios';\nimport UserContext from './userContext';\nimport userReducer from './userReducer';\nimport setAuthToken from '../../utils/setAuthToken';\nimport { GET_USERS, USERS_ERROR } from '../types';\n\nconst UserState = props => {\n  const initialState = {\n    token: localStorage.getItem('token'),\n    users: []\n  };\n\n  const _useReducer = useReducer(userReducer, initialState),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1]; //get users\n\n\n  const getUser = async () => {\n    if (localStorage.token) {\n      setAuthToken(localStorage.token);\n    }\n\n    try {\n      const res = await axios.get('https://api.github.com/users');\n      dispatch({\n        type: GET_USERS,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: USERS_ERROR,\n        payload: null\n      });\n    }\n  };\n\n  return React.createElement(UserContext.Provider, {\n    value: {\n      token: state.token,\n      users: state.users,\n      getUser,\n      error: state.error\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default UserState;","map":{"version":3,"sources":["/Users/binbinfan/project-3/client/src/context/users/UserState.js"],"names":["React","useReducer","axios","UserContext","userReducer","setAuthToken","GET_USERS","USERS_ERROR","UserState","props","initialState","token","localStorage","getItem","users","state","dispatch","getUser","res","get","type","payload","data","err","error","children"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,SACIC,SADJ,EAEIC,WAFJ,QAGO,UAHP;;AAKA,MAAMC,SAAS,GAAGC,KAAK,IAAI;AACvB,QAAMC,YAAY,GAAC;AACjBC,IAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADU;AAEfC,IAAAA,KAAK,EAAC;AAFS,GAAnB;;AADuB,sBAKEb,UAAU,CAACG,WAAD,EAAaM,YAAb,CALZ;AAAA;AAAA,QAKjBK,KALiB;AAAA,QAKVC,QALU,oBAOvB;;;AACA,QAAMC,OAAO,GAAG,YAAY;AAC1B,QAAGL,YAAY,CAACD,KAAhB,EAAsB;AACpBN,MAAAA,YAAY,CAACO,YAAY,CAACD,KAAd,CAAZ;AACD;;AACC,QAAI;AACF,YAAMO,GAAG,GAAG,MAAMhB,KAAK,CAACiB,GAAN,CAAU,8BAAV,CAAlB;AAEAH,MAAAA,QAAQ,CAAC;AACPI,QAAAA,IAAI,EAAEd,SADC;AAEPe,QAAAA,OAAO,EAAEH,GAAG,CAACI;AAFN,OAAD,CAAR;AAID,KAPD,CAOE,OAAOC,GAAP,EAAY;AACZP,MAAAA,QAAQ,CAAC;AACPI,QAAAA,IAAI,EAAEb,WADC;AAEPc,QAAAA,OAAO,EAAE;AAFF,OAAD,CAAR;AAID;AACF,GAjBH;;AAkBA,SACI,oBAAC,WAAD,CAAa,QAAb;AACJ,IAAA,KAAK,EACH;AACEV,MAAAA,KAAK,EAAEI,KAAK,CAACJ,KADf;AAEEG,MAAAA,KAAK,EAAEC,KAAK,CAACD,KAFf;AAGEG,MAAAA,OAHF;AAIEO,MAAAA,KAAK,EAACT,KAAK,CAACS;AAJd,KAFE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASDf,KAAK,CAACgB,QATL,CADJ;AAcH,CAxCD;;AA0CA,eAAejB,SAAf","sourcesContent":["import React, { useReducer } from 'react';\nimport axios from 'axios';\nimport UserContext from './userContext';\nimport userReducer from './userReducer';\nimport setAuthToken from '../../utils/setAuthToken';\nimport {\n    GET_USERS,\n    USERS_ERROR\n} from '../types';\n\nconst UserState = props => {\n    const initialState={\n      token: localStorage.getItem('token'),\n        users:[]\n    };\n    const[state, dispatch] = useReducer(userReducer,initialState);\n\n    //get users\n    const getUser = async () => {\n      if(localStorage.token){\n        setAuthToken(localStorage.token);\n      }\n        try {\n          const res = await axios.get('https://api.github.com/users');\n    \n          dispatch({\n            type: GET_USERS,\n            payload: res.data\n          });\n        } catch (err) {\n          dispatch({\n            type: USERS_ERROR,\n            payload: null\n          });\n        }\n      };\n    return(\n        <UserContext.Provider\n    value={\n      {\n        token: state.token,\n        users: state.users,\n        getUser,\n        error:state.error\n\n      }}>\n      {props.children}\n    </UserContext.Provider>\n    );\n    \n};\n\nexport default UserState;"]},"metadata":{},"sourceType":"module"}